p8105\_hw3\_smm2350
================
Shaina Mackin
2021-10-20

# Homework 3

To begin, I will load the necessary packages and instacart data, as well
as set knitr options.

## Problem 1

### Instacart data

I will write a short description of the dataset, noting the size and
structure of the data, describing key variables, and giving illustrative
examples of observations:

The instacart dataset contains online grocery shopping data from 2017,
with 1384617 observations, or products from orders, and 15 variables,
for a total of 20769255 data points. Key variables include `order_id`,
`product_id`, `user_id`, whether items were `reordered`,
`order_hour_of_day` and `days_since_prior_order` (ranging from 0 to 30
), as well as `product_name` and associated `aisle` and `department`.

Initial analysis shows `produce` to be the most frequently ordered from
department, as visualized below:

``` r
instacart %>%
  count(department) %>%
  arrange(desc(n)) %>%
  ggplot(aes(forcats::fct_reorder(department, (n)), n)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Departments in decreasing order of popularity",
    x = "Department name",
    y = "Number of items ordered",
  )
```

<img src="p8105_hw3_smm2350_files/figure-gfm/exploration-1.png" width="90%" />

#### Let’s explore how many aisles are there, and which aisles are the most ordered from.

``` r
instacart %>%
  group_by(aisle_id, aisle) %>%
  summarize(n_obs = n()) %>%
  arrange(desc(n_obs)) 
```

    ## `summarise()` has grouped output by 'aisle_id'. You can override using the `.groups` argument.

    ## # A tibble: 134 × 3
    ## # Groups:   aisle_id [134]
    ##    aisle_id aisle                          n_obs
    ##       <int> <chr>                          <int>
    ##  1       83 fresh vegetables              150609
    ##  2       24 fresh fruits                  150473
    ##  3      123 packaged vegetables fruits     78493
    ##  4      120 yogurt                         55240
    ##  5       21 packaged cheese                41699
    ##  6      115 water seltzer sparkling water  36617
    ##  7       84 milk                           32644
    ##  8      107 chips pretzels                 31269
    ##  9       91 soy lactosefree                26240
    ## 10      112 bread                          23635
    ## # … with 124 more rows

There are 134 aisles. The aisles with the most ordered from items are
`fresh vegetables` and `fresh fruits`, followed by
`packaged vegetables fruits`.

#### To illustrate this, I will make a plot that shows the number of items ordered in each aisle, limiting this to aisles with more than 10000 items ordered.

``` r
instacart %>%
  count(aisle) %>%
  filter(n > 10000) %>%
  ggplot(aes(forcats::fct_reorder(aisle, (n)), n)) +
  geom_col() +
  coord_flip() +
  labs(
    title = "Number of items ordered per aisle",
    x = "Aisle name",
    y = "Number of items",
    caption = "note: limited to aisles with more than 10,000 items ordered"
  )
```

<img src="p8105_hw3_smm2350_files/figure-gfm/aisles_plot-1.png" width="90%" />

This again shows that the aisles most ordered from are
`fresh vegetables` and `fresh fruits`, followed by
`packaged vegetables fruits`.

#### I will make a table showing the three most popular items in the `baking ingredients`, `dog food care`, and `packaged vegetables fruits` aisles.

``` r
instacart %>%
  filter(aisle == "baking ingredients" | aisle == "dog food care" | aisle == "packaged vegetables fruits") %>%
 count(aisle, product_name) %>%
  arrange(desc(n)) %>%
  group_by(aisle) %>%
  slice(1:3) %>%
  arrange(desc(n)) %>%
  group_by(aisle) %>%
  knitr::kable(caption = "Top  3  Items Per Aisle")
```

| aisle                      | product\_name                                 |    n |
|:---------------------------|:----------------------------------------------|-----:|
| packaged vegetables fruits | Organic Baby Spinach                          | 9784 |
| packaged vegetables fruits | Organic Raspberries                           | 5546 |
| packaged vegetables fruits | Organic Blueberries                           | 4966 |
| baking ingredients         | Light Brown Sugar                             |  499 |
| baking ingredients         | Pure Baking Soda                              |  387 |
| baking ingredients         | Cane Sugar                                    |  336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |   30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |   28 |
| dog food care              | Small Dog Biscuits                            |   26 |

Top 3 Items Per Aisle

We see that `organic baby spinach`, `organic raspberries`, and
`organic blueberries` are the top three ordered items from the
`packaged vegetables fruits` aisle; `light brown sugar`,
`pure baking soda`, and `cane sugar` are the top three ordered items
from the `baking ingredients` aisle; and
`snack sticks chicken & rice recipe dog treats`,
`organix chicken & brown rice recipe`, and `small dog biscuits` are the
top three ordered items from the `dog food care` aisle, respectively.

#### I will make a 2x7 table showing the mean hour of the day at which Pink Lady Apples and Coffee Ice Cream are ordered on each day of the week.

``` r
instacart %>%
  mutate(t_day_number = order_dow +1) %>%
  mutate(day_of_week = wday(t_day_number, label = TRUE)) %>%
  filter(product_name == "Pink Lady Apples" | product_name == "Coffee Ice Cream") %>%
  group_by(product_name, day_of_week) %>%
  summarize(mean_hour = round(mean(order_hour_of_day), digits = 2)) %>%
  pivot_wider(
    names_from = day_of_week,
    values_from = mean_hour
  ) %>%
  knitr::kable(caption = "Mean Hour of Day Ordered")
```

    ## `summarise()` has grouped output by 'product_name'. You can override using the `.groups` argument.

| product\_name    |   Sun |   Mon |   Tue |   Wed |   Thu |   Fri |   Sat |
|:-----------------|------:|------:|------:|------:|------:|------:|------:|
| Coffee Ice Cream | 13.77 | 14.32 | 15.38 | 15.32 | 15.22 | 12.26 | 13.83 |
| Pink Lady Apples | 13.44 | 11.36 | 11.70 | 14.25 | 11.55 | 12.78 | 11.94 |

Mean Hour of Day Ordered

`Coffee Ice Cream` is ordered, on average, later in the day than
`Pink Lady Apples`.

## Problem 2

### BRFSS data

I will clean the data, formatting to use appropriate variable names,
focusing on the `Overall Health` topic, and only including factored
responses ordered from `Excellent` to `Poor`.

``` r
data("brfss_smart2010")

brfss_tidy = brfss_smart2010 %>%
  janitor::clean_names() %>%
   filter(
    topic %in% "Overall Health",
    response %in% "Poor" | response %in% "Fair" | response %in% "Good" | response %in% "Very Good" | response %in% "Excellent") %>% 
 mutate(response_ordered = factor(response, ordered = TRUE, levels = c("Poor", "Fair", "Good", "Very Good", "Excellent")))
```

## Problem 3

### Accelerometer data

``` r
accel_df = read_csv("accel_data.csv") %>%
  janitor::clean_names()
```

    ## Rows: 35 Columns: 1443

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr    (1): day
    ## dbl (1442): week, day_id, activity.1, activity.2, activity.3, activity.4, ac...

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
